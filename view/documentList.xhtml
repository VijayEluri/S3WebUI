<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.com/products/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:a="http://richfaces.org/a4j"
                template="layout/template.xhtml">

    <ui:define name="body">
        <rich:panel id="documentsPanel">
            <f:facet name="header">Documents</f:facet>
            <h:dataTable id="documents" value="#{documents}"
                         var="doc" rendered="#{documents != null and documents.size>0}">
                <h:column id="column1">
                    <f:facet id="NameFacet" name="header">Name</f:facet>
                    #{doc.name}
                </h:column>
                <h:column id="column6">
                    <f:facet id="publicurl" name="header">Public URL</f:facet>
                    #{doc.publicUrl}
                </h:column>
                <h:column id="column11">
                    <f:facet id="PasswordFacet" name="header">Password</f:facet>
                    #{doc.password}
                </h:column>
                <h:column id="column5">
                    <f:facet id="ActionFacet" name="header">Action</f:facet>
                    <s:link id="download" value="Download"
                            action="#{documentListAction.download(doc)}"/>
                    <span>&nbsp;</span>
                    <s:link id="delete" value="Delete" action="#{documentListAction.delete(doc)}"/>
                </h:column>

            </h:dataTable>
        </rich:panel>
        <rich:panel>
            <f:facet name="header">upload new file</f:facet>
            <h:form id="uploadForm" enctype="multipart/form-data">
                <s:validateAll>
                    <fieldset>
                        <legend>Enter file to upload</legend>
                        <div>
                            <s:fileUpload id="newFile"
                                          data="#{uploadingDocument.data}" accept="image/*"
                                          contentType="#{uploadingDocument.contentType}"
                                          fileName="#{uploadingDocument.key}"
                                          size="80" maxlength="80" required="true"/>
                            <h:outputLabel for="password">Password:</h:outputLabel>
                            <h:inputSecret id="password" value="#{uploadingDocument.password}"/>
                        </div>
                        <div>
                            <h:commandButton value="Upload"
                                             action="#{documentUploadAction.upload(uploadingDocument)}"
                                             reRender="documentsPanel" id="uploadButton"/>
                        </div>
                    </fieldset>
                </s:validateAll>
            </h:form>
        </rich:panel>
    </ui:define>
</ui:composition>
